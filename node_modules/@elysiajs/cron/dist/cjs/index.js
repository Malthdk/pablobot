"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cron = void 0;
const croner_1 = require("croner");
const cron = ({ pattern, name, run, ...options }) => (app) => {
    if (!pattern)
        throw new Error('pattern is required');
    if (!name)
        throw new Error('name is required');
    return app.state('cron', {
        ...(app.store?.cron ?? {}),
        [name]: new croner_1.Cron(pattern, options, () => run(app.store))
    });
};
exports.cron = cron;
exports.default = exports.cron;
