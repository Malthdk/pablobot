import { Cron } from 'croner';
export const cron = ({ pattern, name, run, ...options }) => (app) => {
    if (!pattern)
        throw new Error('pattern is required');
    if (!name)
        throw new Error('name is required');
    return app.state('cron', {
        ...(app.store?.cron ?? {}),
        [name]: new Cron(pattern, options, () => run(app.store))
    });
};
export default cron;
